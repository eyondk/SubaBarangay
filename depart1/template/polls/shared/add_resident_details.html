<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barangay Suba Mangement System</title>
    {% load static %}
    <link rel="shortcut icon" href="{% static 'polls/image/LOGO.ico' %}" type="image/x-icon">
    <link rel="stylesheet" href="{%static 'polls/css/MainHeader.css'%}">
    <link rel="stylesheet" href="{%static 'polls/css/TresidentAdd_details.css'%}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

</head>
<body>
    <div class="Main_header">
        <div class="userdetails">
            <img src="{% static 'polls/image/LOGO.ico' %}" alt="User Profile Picture" class="user-image">
            {% block userinfo %}
            {% endblock %}
        </div>
        <h1 class="tittle">Barangay Suba Management System</h1>
        <p id="live-time"></p>
    </div>

    <div class="Body">
        <div class="menu">
            {% block nav_menu %}{% endblock %}
            <div class="logout">
                <a href="" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>

        <h1 class="section-title">ADD RESIDENT</h1>
        <form class="resident-form">
            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName">
            </div>
            <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName">
            </div>
            <div class="form-group">
                <label for="middleName">Middle Name</label>
                <input type="text" id="middleName">
            </div>
            <div class="form-group">
                <label for="nickname">Nickname</label>
                <input type="text" id="nickname">
            </div>
            <div class="form-group">
                <label for="birthdate">Birthdate</label>
                <input type="date" id="birthdate">
            </div>
            <div class="form-group">
                <label for="age">age</label>
                <input type="text" id="age">
            </div>
            <div class="form-group">
                <label for="gender">Gender</label>
                <select name="gender">
                    <option value=""></option>
                    <option value="Lesbian">Lesbian</option>
                    <option value="Gay">Gay</option>
                    <option value="Bisexual">Bisexual</option>
                    <option value="Transgender">Transgender</option>
                    <option value="Queer">Queer</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sex">Sex</label>
                <select name="sex">
                    <option value=""></option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
            <div class="form-group">
                <label for="weight">weight</label>
                <input type="text" id="weight">
            </div>
            <div class="form-group">
                <label for="bloodtype">blood type</label>
                <select name="blood_type">
                    <option value=""></option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
            </div>
            <div class="form-group">
                <label for="eyecolor">Eye color</label>
                <input type="text" id="eyecolor">
            </div>
            <!-- <div class="form-group">
                <label for="houseowner">House Owner</label>
                <input type="text" id="houseowner">
            </div> -->
            <div class="form-group">
                <label for="block">Block</label>
                <input type="text" id="block">
            </div>
            <div class="form-group">
                <label for="strt">Street</label>
                <input type="text" id="strt">
            </div>
            <div class="form-group">
                <label for="houseno">House No.</label>
                <input type="text" id="houseno" >
            </div>
            <div class="form-group">
                <label for="religion">Religion</label>
                <input type="text" id="religion" >
            </div>
            <div class="form-group">
                <label for="civilstat">Civil Status</label>
                <select name="civil_status" id="civil_status">
                    <option value=""></option>
                    <option value="Single">Single</option>
                    <option value="Married">Married</option>
                    <option value="Widowed">Widowed</option>
                    <option value="Divorced">Divorced</option>
                    <option value="Separated">Separated</option>
                </select>
            </div>
            <div class="form-group">
                <label for="orgname">Organization</label>
                <select name="organization">
                    <option value=""></option>
                    <option value="Women's">Women's</option>
                    <option value="Erpat">Erpat</option>
                    <option value="Senior Citizen">Senior Citizen</option>
                    <option value="PWD">PWD</option>
                    <option value="LGBTQ">LGBTQ</option>
                    <option value="Children">Children</option>
                </select>
            </div>
            <!-- <div class="form-group">
                <label for="precinctno">Precinct No.</label>
                <input type="text" id="precinctno" readonly>
            </div>
            <div class="form-group">
                <label for="voterdateadded">Voter Registration Date</label>
                <input type="text" id="voterdateadded" readonly>
            </div>   -->
            <div class="form-actions">
                <a  href="{% url 'Tresidents' %}" class="cancel-btn">Cancel</a>
                {% if 'Married' == 'Married' or 'Married' == 'Divorced' or 'Married' == 'Widowed' %}
                <button type="button" onclick="saveResidentData()" class="next-btn">Next</a>
                {% else %}
                <a href="{% url 'Tresident_parents' %}" class="next-btn">Next</a>
                {% endif %}             
            </div>
        </form>
    </div>

    
    <div id="logout-modal" class="logout-modal">
        <div class="logout-modal-content">
            <span class="close-logout-btn">&times;</span>
            <h2>Logout Confirmation</h2>
            <p>Are you sure you want to log out?</p>
            <div class="logout-modal-actions">
                <a href="#" id="logout-confirm" class="confirm-logout-btn">Yes, Logout</a>
                <button id="logout-cancel" class="cancel-logout-btn">No, Cancel</button>
            </div>
        </div>
    </div>

    <script src="{% static 'polls/js/logoutModal.js' %}"></script>
</body>
</html>
<script>
    // Function to update the live time
    function updateTime() {
        const options = { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
        const now = new Date().toLocaleString('en-US', { ...options, timeZone: 'Asia/Manila' });
        document.getElementById('live-time').innerText = now;
    }

    // Update the time every second
    setInterval(updateTime, 1000);
    updateTime(); // Call immediately to set the initial time
    function saveResidentData() {
        const residentData = {
            lastName: document.getElementById('lastName').value,
            firstName: document.getElementById('firstName').value,
            middleName: document.getElementById('middleName').value,
            nickname: document.getElementById('nickname').value,
            birthdate: document.getElementById('birthdate').value,
            age: document.getElementById('age').value,
            gender: document.querySelector('select[name="gender"]').value,
            sex: document.querySelector('select[name="sex"]').value,
            weight: document.getElementById('weight').value,
            bloodType: document.querySelector('select[name="blood_type"]').value,
            eyeColor: document.getElementById('eyecolor').value,
            block: document.getElementById('block').value,
            street: document.getElementById('strt').value,
            houseNumber: document.getElementById('houseno').value,
            religion: document.getElementById('religion').value,
            civilStatus: document.querySelector('select[name="civil_status"]').value,
            organization: document.querySelector('select[name="organization"]').value
        };

        // Store the data in localStorage
        localStorage.setItem('residentData', JSON.stringify(residentData));
        
        console.log("Resident Data from localStorage:", residentData);

        // Redirect to the next page
        window.location.href = "{% url 'TaddEduc_details' %}"; // Replace with your actual page
    }
</script>
